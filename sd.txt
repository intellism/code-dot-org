@startuml
title Middle School Teacher Registers For CSD Workshop

' Configuration
autonumber
hide footbox

' Participants
box "UI Flow" #LightGreen
actor teacher
participant browser as "browser"
end box

participant peg as "pegasus app"
participant dashboard as "dashboard app"

' Flow
== Discovering ==

teacher -> browser: Enter code.org in browser
activate teacher
activate browser
browser -> peg: get /
activate peg
browser <-- peg: /sites.v3/code.org/public/index.haml
teacher <-- browser: Code.org homepage

teacher -> browser: Select //Middle School//
browser -> peg: get /educate/curriculum/middle-school
peg --> browser: /sites.v3/code.org/public/educate/curriculum/middle-school.md
teacher <-- browser: Middle school curriculum page

teacher -> browser: Select //Learn about professional learning//
browser -> peg: get /educate/professional-learning/middle-high
browser <-- peg: /sites.v3/code.org/public/educate/professional-learning/middle-high.md
teacher <-- browser: PD for Middle-High school page

teacher -> browser: Select //Apply Now// or //Get Started//
browser -> peg: get /educate/professional-learning/program-information
browser <-- peg: /sites.v3/code.org/public/educate/professional-learning/program-information.md
deactivate peg
teacher <-- browser: Find Regional Information page

teacher -> browser: Enter a zip code
teacher <-- browser: List of regional partners and workshops

== Applying ==

teacher -> browser: Select //Start Application//
browser -> dashboard: get /pd/application/teacher
    rnote right dashboard: teacher_application#new
    'dashboard/app/controllers/pd/application/teacher_application_controller.rb
activate dashboard
browser <-- dashboard: /app/views/pd/application/teacher_application/logged_out.haml
    'return options: logged_out || not_teacher || submitted || dashboard/app/views/pd/application/teacher_application/new.html.haml
teacher <-- browser: Sign in/Sign up page
alt Teacher doesn't have CDO account
    teacher -> browser: Select //Create an account//
...
else Teacher already has CDO account
    teacher -> browser: Select //Sign in//
end
teacher <-- browser: Teacher application form
teacher -> browser: Fill out and submit form
teacher <-- browser: Submission confirmation page
teacher <-- dashboard: Submission confirmation email

/'
teacher -> browser:
teacher <-- browser:
'/

deactivate browser
deactivate teacher

create actor principal #gray
dashboard ->> principal: Request to approve this application
alt Principal approves application
dashboard <-- principal: Approve
teacher <-- dashboard: Send approval email
else Principal rejects application
dashboard <-- principal: Reject
teacher <-- dashboard: Send rejection email
end

== Registering ==

@enduml